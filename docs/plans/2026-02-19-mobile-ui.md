# Mobile UI Implementation Plan

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Make WeekPlan slim and usable on mobile with a bottom tab bar, compact week header, and a 2-column day grid ‚Äî all visible without scrolling.

**Architecture:** CSS-only mobile overrides via `@media (max-width: 700px)`. Three surgical changes: (1) bottom nav in `App.tsx` + CSS, (2) icon-only week header controls in `WeekView.tsx`, (3) compact 2-column day grid in CSS. Desktop layout untouched.

**Tech Stack:** React, TypeScript, CSS media queries, react-router-dom NavLink

---

### Task 1: Bottom tab bar ‚Äî CSS

**Files:**
- Modify: `src/styles.css`

**Step 1: Add bottom nav styles inside the existing `@media (max-width: 700px)` block**

Replace the existing `@media (max-width: 700px)` block (lines 518‚Äì534) with:

```css
@media (max-width: 700px) {
  main {
    padding: 12px;
    padding-bottom: 72px;
  }

  .top-bar {
    padding: 10px 16px;
  }

  .top-bar nav,
  .pattern-chip {
    display: none;
  }

  .bottom-nav {
    display: flex;
  }

  .week-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 8px;
  }

  .week-grid .day-card:last-child {
    grid-column: 1 / -1;
  }

  .day-card {
    padding: 10px;
    min-height: unset;
    gap: 6px;
  }

  .day-card h3 {
    font-size: 0.85rem;
  }

  .page-header {
    flex-direction: column;
  }

  .ingredient-row {
    grid-template-columns: 1fr;
  }
}
```

**Step 2: Add `.bottom-nav` base styles (outside media queries, hidden by default)**

Add this block before the `@media (max-width: 1000px)` block:

```css
.bottom-nav {
  display: none;
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: 56px;
  background: var(--surface);
  border-top: 1px solid var(--border);
  z-index: 10;
}

.bottom-nav a {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2px;
  color: var(--muted);
  font-size: 0.65rem;
  font-weight: 500;
  padding: 6px 0;
}

.bottom-nav a.active {
  color: var(--accent);
}

.bottom-nav a svg {
  width: 20px;
  height: 20px;
  stroke: currentColor;
  fill: none;
  stroke-width: 1.8;
  stroke-linecap: round;
  stroke-linejoin: round;
}
```

**Step 3: No tests needed for CSS ‚Äî verify visually after Task 2**

**Step 4: Commit**

```bash
git add src/styles.css
git commit -m "style: add bottom nav and compact mobile styles"
```

---

### Task 2: Bottom tab bar ‚Äî HTML in App.tsx

**Files:**
- Modify: `src/App.tsx`

**Step 1: Add the `.bottom-nav` element to the JSX**

After the closing `</main>` tag and before the `<Modal ...>` in `App.tsx`, insert:

```tsx
<nav className="bottom-nav">
  <NavLink to="/" end>
    <svg viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="9" y1="21" x2="9" y2="9"/></svg>
    Week
  </NavLink>
  <NavLink to="/recipes">
    <svg viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 5-7 13-7 13S5 14 5 9a7 7 0 0 1 7-7z"/><circle cx="12" cy="9" r="2.5"/></svg>
    Recipes
  </NavLink>
  <NavLink to="/ingredients">
    <svg viewBox="0 0 24 24"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/></svg>
    Ingredients
  </NavLink>
  <NavLink to="/settings">
    <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
    Settings
  </NavLink>
</nav>
```

**Step 2: Verify visually**

Run the dev server (`npm run dev`) and open on a mobile viewport (Chrome DevTools ‚Üí 390px wide). Check:
- Top bar shows brand only, nav links hidden
- Bottom bar shows 4 tabs with icons above labels
- Active tab is orange (accent color)
- Content doesn't hide behind the bar

**Step 3: Commit**

```bash
git add src/App.tsx
git commit -m "feat: add mobile bottom tab bar"
```

---

### Task 3: Compact week view header on mobile

**Files:**
- Modify: `src/components/WeekView.tsx`
- Modify: `src/styles.css`

**Step 1: Add mobile-specific week header CSS**

Inside the `@media (max-width: 700px)` block, add:

```css
  .week-actions {
    display: none;
  }

  .mobile-week-nav {
    display: flex;
  }

  .page-header {
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
  }

  .page-header h2 {
    display: none;
  }

  .page-header p {
    margin: 0;
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--ink);
  }
```

**Step 2: Add `.mobile-week-nav` base styles (hidden by default)**

Add alongside `.bottom-nav` base styles:

```css
.mobile-week-nav {
  display: none;
  align-items: center;
  gap: 4px;
}

.mobile-week-nav button {
  padding: 6px 8px;
  line-height: 1;
}

.mobile-week-nav button svg {
  width: 16px;
  height: 16px;
  stroke: currentColor;
  fill: none;
  stroke-width: 2;
  stroke-linecap: round;
  stroke-linejoin: round;
  display: block;
}
```

**Step 3: Add mobile nav controls to WeekView.tsx**

In the `.page-header` div in `WeekView.tsx`, add a `.mobile-week-nav` sibling after `.week-actions`:

```tsx
<div className="week-actions">
  <button type="button" className="ghost" onClick={() => setWeekOffset((prev) => prev - 1)}>
    Previous week
  </button>
  <button type="button" className="ghost" onClick={() => setWeekOffset(0)}>
    Today
  </button>
  <button type="button" className="ghost" onClick={() => setWeekOffset((prev) => prev + 1)}>
    Next week
  </button>
  <button type="button" onClick={() => setShoppingOpen(true)}>
    Generate shopping list
  </button>
</div>
<div className="mobile-week-nav">
  <button type="button" className="ghost" onClick={() => setWeekOffset((prev) => prev - 1)}>
    <svg viewBox="0 0 24 24"><polyline points="15 18 9 12 15 6"/></svg>
  </button>
  <button type="button" className="ghost" onClick={() => setShoppingOpen(true)}>
    <svg viewBox="0 0 24 24"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>
  </button>
  <button type="button" className="ghost" onClick={() => setWeekOffset((prev) => prev + 1)}>
    <svg viewBox="0 0 24 24"><polyline points="9 18 15 12 9 6"/></svg>
  </button>
</div>
```

Note: The order is ‚ùÆ, üõí, ‚ùØ ‚Äî cart in the middle between the nav arrows so it fits the single row naturally. If it looks better with cart on the far right, swap the order.

**Step 4: Verify visually**

On a 390px viewport:
- Week header is one slim row: `‚ùÆ  Feb 17‚Äì23 ¬∑ Week A  ‚ùÆ  üõí  ‚ùØ`
- Tapping ‚ùÆ/‚ùØ changes the week
- Tapping üõí opens the shopping list modal

**Step 5: Commit**

```bash
git add src/components/WeekView.tsx src/styles.css
git commit -m "feat: compact mobile week header with icon nav"
```

---

### Task 4: Final pass ‚Äî visual QA

**No code changes ‚Äî just verification.**

Open the app in Chrome DevTools at these viewports:
- 390px (iPhone 14) ‚Äî all 7 days in 2-col grid, Sunday full-width, no scroll needed to see all days
- 768px ‚Äî should still look like desktop (top nav visible, no bottom bar)
- 1280px ‚Äî desktop layout unchanged

Check:
- Bottom bar tabs highlight correctly when navigating
- Modal content doesn't overflow on small screens (modal uses `width: min(560px, 90vw)` ‚Äî already fine)
- No content hidden behind bottom nav bar on any page (padding-bottom: 72px on main)
- Shopping list modal scrolls internally if list is long

If anything looks off, fix in `styles.css` and commit:

```bash
git add src/styles.css
git commit -m "style: mobile QA fixes"
```
